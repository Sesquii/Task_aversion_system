Enforce data isolation: Require user_id in database mode

This commit enforces strict data isolation by requiring user_id parameters
in database mode while allowing CSV mode for unauthenticated users and
utility scripts. This ensures users can only access their own data.

CRITICAL CHANGES:
=================

1. TaskManager.get_all() now REQUIRES user_id in database mode
   - Raises ValueError if user_id is None in database mode
   - CSV mode still allows user_id=None for backward compatibility
   - Database queries strictly filter by user_id (no NULL user_id access)

2. InstanceManager.list_active_instances() requires user_id
   - Returns empty list if user_id is None (security measure)
   - All calls updated to pass user_id

3. Analytics functions updated to require/accept user_id
   - All get_all() calls now pass user_id
   - Functions that didn't have user_id parameter now accept it
   - Helper functions updated to propagate user_id

BACKEND FIXES:
==============

- task_manager.py:
  * get_all() requires user_id in database mode (raises ValueError if None)
  * _get_all_db() strictly filters by user_id (no NULL access)
  * CSV mode allows user_id=None for unauthenticated users

- analytics.py:
  * recommendations_from_instances() - added user_id parameter
  * recommendations() - added user_id parameter  
  * recommendations_by_category() - added user_id parameter
  * get_attribute_trends() - passes user_id to get_all()
  * calculate_daily_scores() - passes user_id to get_all()
  * get_scatter_data() - added user_id parameter
  * calculate_correlation() - added user_id parameter
  * calculate_overall_improvement_from_instance() - added user_id parameter
  * All get_all() calls in get_dashboard_metrics() now pass user_id
  * Fixed 20+ instances of get_all() calls missing user_id

- productivity_tracker.py:
  * All get_all() calls updated (4 instances)
  * Falls back to CSV mode for legacy string user_ids
  * Note: Uses string user_ids, needs conversion for full database support

- routine_scheduler.py:
  * Background service falls back to CSV mode when user_id unavailable
  * Updated both _check_and_initialize_tasks() and get_scheduled_tasks()
  * TODO: Consider iterating over all users for multi-user support

UTILITY SCRIPTS:
===============

- check_today_hours.py:
  * Set to use CSV mode (USE_CSV=true) for utility script
  * Updated get_all() call to pass user_id=None (allowed in CSV mode)

- benchmark_performance.py:
  * Set to use CSV mode (USE_CSV=true) for benchmark script
  * Updated list_active_instances() calls to pass user_id=None

DATA ISOLATION POLICY:
======================

Database Mode (Authenticated Users):
- user_id is REQUIRED for all data access
- Raises ValueError if user_id is None
- Strict filtering ensures users only see their own data
- NULL user_id data remains in database for migration but is inaccessible

CSV Mode (Unauthenticated/Legacy):
- user_id=None is allowed for backward compatibility
- Used by utility scripts, tests, and legacy code
- Background services automatically fall back to CSV if needed

Migration Strategy:
- Old data with NULL user_id remains in database
- Can be migrated to user_id=1 or specific users via migration scripts
- Not accessible through normal queries (data isolation enforced)

SECURITY IMPROVEMENTS:
=====================

1. Prevents cross-user data access in database mode
2. Enforces authentication requirement for database access
3. Clear separation between authenticated (database) and unauthenticated (CSV) modes
4. All UI pages already authenticate users before data access

TESTING NOTES:
=============

- test_pause_resume_time_tracking.py uses CSV mode (user_id=None allowed)
- Standalone scripts use CSV mode for utility purposes
- All production UI code requires authentication and passes user_id

This change ensures proper data isolation while maintaining backward
compatibility for unauthenticated users and utility scripts through CSV mode.
