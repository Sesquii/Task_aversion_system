# Git Commit Command Sequence for This Session
# Execute these commands in order to commit only files changed in this session

# Step 1: Stage modified files
git add task_aversion_app/backend/auth.py

# Step 2: Verify what will be committed
git status

# Step 3: Review the staged changes (optional)
git diff --cached

# Step 4: Commit with message
git commit -m "feat(auth): clear all cached data on user logout

Add comprehensive cache clearing functionality to logout process to ensure
users get fresh data when logging in and prevent data leakage between sessions.

Changes:
- Add clear_all_caches() function to clear all application caches
  * Clears Analytics class-level caches (relief summary, composite scores,
    instances, dashboard metrics, time tracking, trend series, attribute
    distribution, stress dimension, rankings, leaderboard)
  * Clears InstanceManager class-level caches (shared active instances,
    recent completed instances, per-user cache)
  * Clears TaskManager instance caches (task lists, task data) via global
    instance from app module
- Update logout() function to call clear_all_caches() after clearing session
  * Ensures all cached data is cleared when user logs out
  * Prevents stale cache data from persisting across user sessions
  * Includes error handling for each cache clearing operation

Files modified:
- task_aversion_app/backend/auth.py
  * Added clear_all_caches() function with comprehensive cache clearing
  * Updated logout() to call clear_all_caches() after session cleanup

Purpose:
This change ensures that when a user logs out, all cached data is cleared
from memory. This prevents:
- Data leakage between user sessions
- Stale cache data being served to new users
- Performance issues from accumulated cache data
- Security concerns with cached user-specific data

The implementation handles cases where modules may not be loaded yet and
includes proper error handling to ensure logout always succeeds even if
cache clearing encounters issues."
